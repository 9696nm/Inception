[www]
; ============================================================================
; PHP-FPM プール設定ファイル
; ============================================================================
; PHP-FPM の www プール設定
; Docker 環境で動作するように最適化
; ============================================================================

; ----------------------------------------------------------------------------
; ユーザーとグループ設定
; ----------------------------------------------------------------------------

; PHP-FPM を実行するユーザー
user = www-data

; PHP-FPM を実行するグループ
group = www-data

; ----------------------------------------------------------------------------
; リスニング設定
; ----------------------------------------------------------------------------

; PHP-FPM がリッスンするアドレスとポート
; 0.0.0.0:9000 で全てのネットワークインターフェースからの接続を許可
; Docker コンテナ間通信のために必要
listen = 0.0.0.0:9000

; ----------------------------------------------------------------------------
; プロセス管理設定
; ----------------------------------------------------------------------------

; プロセス管理方式
; dynamic: 動的にプロセス数を調整
pm = dynamic

; 最大子プロセス数
pm.max_children = 5

; 起動時の子プロセス数
pm.start_servers = 2

; アイドル状態の最小子プロセス数
pm.min_spare_servers = 1

; アイドル状態の最大子プロセス数
pm.max_spare_servers = 3

; 各子プロセスが処理するリクエスト数
pm.max_requests = 500
