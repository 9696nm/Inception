# ============================================================================ #
#                       MariaDB サーバー設定ファイル                            #
# ============================================================================ #
# MySQL/MariaDB のサーバー設定
# Docker 環境で動作するように最適化
# ============================================================================ #

[mysqld]

# ---------------------------------------------------------------------------- #
# 基本設定
# ---------------------------------------------------------------------------- #

# ユーザー：MySQL プロセスを実行するユーザー
user = mysql

# PID ファイルの場所
pid-file = /run/mysqld/mysqld.pid

# ソケットファイルの場所
socket = /run/mysqld/mysqld.sock

# ポート番号
port = 3306

# ベースディレクトリ
basedir = /usr

# データディレクトリ
datadir = /var/lib/mysql

# 一時ディレクトリ
tmpdir = /tmp

# 言語設定
lc-messages-dir = /usr/share/mysql

# ---------------------------------------------------------------------------- #
# ネットワーク設定
# ---------------------------------------------------------------------------- #

# バインドアドレス：0.0.0.0 で全てのネットワークインターフェースからの接続を許可
# Docker コンテナ間通信のために必要
bind-address = 0.0.0.0

# ---------------------------------------------------------------------------- #
# 文字セット設定
# ---------------------------------------------------------------------------- #

# サーバーの文字セット：UTF-8
character-set-server = utf8mb4

# 照合順序
collation-server = utf8mb4_unicode_ci

# ---------------------------------------------------------------------------- #
# ログ設定
# ---------------------------------------------------------------------------- #

# エラーログの場所
log_error = /var/log/mysql/error.log

# スロークエリログを有効化（デバッグ用）
# slow_query_log = 1
# slow_query_log_file = /var/log/mysql/slow-query.log
# long_query_time = 2

# ---------------------------------------------------------------------------- #
# パフォーマンス設定
# ---------------------------------------------------------------------------- #

# 最大接続数
max_connections = 100

# InnoDB バッファプールサイズ（利用可能なメモリに応じて調整）
innodb_buffer_pool_size = 256M

# InnoDB ログファイルサイズ
innodb_log_file_size = 64M

# ---------------------------------------------------------------------------- #
# セキュリティ設定
# ---------------------------------------------------------------------------- #

# リモートルートログインを無効化（後でスクリプトで設定）
# skip-networking を使用しない（Docker ネットワークで通信する必要があるため）

