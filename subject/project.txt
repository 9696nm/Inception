プロジェクト全体は仮想マシン上で行わなければなりません。Docker Compose を使用する必要があります。

各 Docker イメージは、それに対応するサービスと同じ名前でなければなりません。
各サービスは専用のコンテナ内で実行される必要があります。
パフォーマンス上の理由から、コンテナは Alpine または Debian の安定版の一つ前のバージョンをベースに構築しなければなりません（どちらを使うかは自由です）。
また、各サービスごとに独自の Dockerfile を作成する必要があります。
Dockerfile は、Makefile によって呼び出される docker-compose.yml に記述されていなければなりません。

つまり、プロジェクトの Docker イメージはすべて自分でビルドしなければなりません。
したがって、DockerHub などから既製のイメージを取得したり（ただし Alpine/Debian は除く）、それらのサービスを使用することは禁止されています。

次の設定を行わなければなりません：

NGINX（TLSv1.2 または TLSv1.3 のみ）を含む Docker コンテナ

WordPress（php-fpm がインストールおよび構成されていること）を含む Docker コンテナ（nginx は含めない）

MariaDB のみを含む Docker コンテナ（nginx は含めない）

WordPress データベースを格納するボリューム

WordPress のウェブサイトファイルを格納する第2のボリューム

コンテナ間の接続を確立する docker-network

コンテナはクラッシュ時に自動で再起動するように設定しなければなりません。

Docker コンテナは仮想マシンではありません。したがって、tail -f のような「ハック的」な方法を用いるのは推奨されません。
デーモンの動作について学び、それを使用すべきかどうかを理解してください。

もちろん、network: host や --link、links: の使用は禁止されています。
docker-compose.yml ファイルには必ず network の記述が存在する必要があります。

また、無限ループを実行するコマンドでコンテナを起動してはなりません。
これは entrypoint、または entrypoint スクリプトで使用するコマンドにも適用されます。

以下のような「ハック的」な方法は禁止されています：
tail -f、bash、sleep infinity、while true

PID 1 に関する情報と、Dockerfile を記述する際のベストプラクティスについて調べてください。

WordPress データベース内には 2 人のユーザーが存在しなければなりません。
そのうち 1 人は管理者（administrator）ですが、そのユーザー名に 'admin'、'Admin'、'administrator'、'Administrator' を含めてはいけません。
（例：admin、administrator、Administrator、admin-123 などは禁止）

ボリュームは、ホストマシン上の /home/login/data フォルダで利用できるようにする必要があります。
もちろん、login は自分のログイン名に置き換えなければなりません。

作業を簡略化するために、あなたのドメイン名をローカル IP アドレスに割り当てる必要があります。
このドメイン名は login.42.fr でなければなりません。
たとえば、ログイン名が wil の場合、wil.42.fr は Wil のウェブサイトを指す IP アドレスにリダイレクトされます。

latest タグの使用は禁止されています。
パスワードを Dockerfile に直接記述してはいけません。
環境変数の使用は必須 です。
また、.env ファイルを使用して環境変数を保存し、
Docker secrets を用いて機密情報を保護することを強く推奨します。

NGINX コンテナはインフラへの唯一の入口でなければなりません。
アクセスは ポート443 のみ、プロトコルは TLSv1.2 または TLSv1.3 のみを使用します。

以下は、期待される結果の構成図の例です（省略）。

続いて、ディレクトリ構造の例が以下に示されています（省略せず翻訳すると長いため略記しますが、内容はファイル一覧と .env の記述例です）。

（中略：Makefile、secrets フォルダ、srcs フォルダ、requirements 以下の各サービスの Dockerfile 構成例）

.env の例：

DOMAIN_NAME=wil.42.fr
# MYSQL SETUP
MYSQL_USER=XXXXXXXXXXXX
[...]


セキュリティ上の理由により、認証情報・APIキー・パスワードなどはすべてローカルに安全に保存し、
git で無視されるように設定する必要があります。
公開リポジトリ上に認証情報を保存した場合、即座にプロジェクトは失格となります。

環境変数（ドメイン名など）は .env ファイルに保存しても構いません。

第6章　ボーナス課題（Bonus part）

このプロジェクトのボーナス課題はシンプルであることを意図しています。

追加する各サービスごとに Dockerfile を作成しなければなりません。
したがって、各サービスは独自のコンテナ内で実行され、必要に応じて専用のボリュームを持ちます。

ボーナス一覧：

WordPress サイトのキャッシュを適切に管理するために Redis キャッシュを設定する

WordPress サイトのボリュームを指す FTP サーバーコンテナを設定する

PHP以外の言語でシンプルな静的ウェブサイトを作成する（例：ポートフォリオや自己紹介サイト）

Adminer を設定する

独自に有用と考えるサービスを追加し、防衛（発表）時にその選択を正当化する

追加サービスを設定する場合は、必要に応じてポートを追加で開放しても構いません。
